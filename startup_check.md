# Orca Startup Check

{
  "name": "StartupCheck",
  "description": "Verify that Archon and Serena MCP servers are available and properly configured before running any workflows.",
  "parameters": [],
  "prompt": "You are performing a startup health check for the Orca workflow orchestration system. This check must be completed successfully before any workflow operations begin.\n\n**Required Actions:**\n\n1. **Check and Configure MCP Servers**:\n   - First, check current MCP server status with: `claude mcp list`\n   - If servers are missing, automatically add them using the configuration from templates/.claude.json:\n     - Archon: `claude mcp add archon http://localhost:8051/mcp`\n     - Serena: `claude mcp add serena -- python -m uv tool run --from git+https://github.com/oraios/serena serena start-mcp-server --context ide-assistant --project $(pwd)`\n   - Use `mcp__archon__health_check()` to verify Archon MCP server is running and accessible\n   - Use Serena MCP tools (try `mcp__serena__list_dir`) to verify Serena MCP server is connected and functional\n   - If servers still fail after adding, provide specific troubleshooting guidance\n\n2. **Validate and Setup Project Configuration**:\n   - Check if `.claude/.claude.json` exists in current project; if not, copy from `templates/.claude.json`\n   - Confirm project is properly recognized by both MCP servers\n   - If missing configuration files, copy them from templates automatically\n\n3. **Test Basic Functionality**:\n   - Archon: Try `mcp__archon__session_info()` to confirm session management works\n   - Serena: Try listing project files to confirm file system access works\n\n4. **Verify Project Initialization**:\n   - Archon: Check if current project exists in Archon using `mcp__archon__find_projects()`\n   - Serena: Verify onboarding status using `mcp__serena__check_onboarding_performed()`\n   - If either system is not initialized, provide setup instructions\n\n5. **Report Status**:\n   - ✅ **READY**: All systems operational, project initialized in both Archon and Serena - workflows can proceed\n   - ⚠️ **PARTIAL**: MCP servers connected but project not fully initialized - provide initialization steps\n   - ❌ **BLOCKED**: Critical systems unavailable - provide fix instructions\n\n**Troubleshooting Guidance to Provide:**\n\n- **Archon Issues**: \n  - Check if Archon server is running: `curl http://localhost:8051/mcp` or start the server\n  - Verify network connectivity and port availability\n\n- **Serena Issues**:\n  - Run: `claude mcp list` to check server status\n  - If disconnected: `claude mcp remove serena && claude mcp add serena -- uvx --from git+https://github.com/oraios/serena serena start-mcp-server --context ide-assistant --project $(pwd)`\n  - If not onboarded: Run `mcp__serena__onboarding()` and create memory files\n\n- **Project Initialization Issues**:\n  - Archon: Create project using `mcp__archon__manage_project(\"create\", title=\"[project_name]\", description=\"[description]\")`\n  - Serena: Perform onboarding and create standardized memory files from templates\n\n**Success Criteria:**\nBoth MCP servers must be fully operational for Orca workflows to function properly. The startup check ensures all dependencies are met before expensive workflow operations begin."
}